---
layout: page
title: Humanas Generator
name: humanas-generator
---

<style>
	#btn-generate, #sentence {
		font-size: 1.5em;
	}
</style>

<p>
	<button id="btn-generate" class="pure-button pure-button-primary button-xlarge">Gerar</button>
</p>
<blockquote id="sentence"></blockquote>

<script>
	var terms = [
		"História",
		"Arte",
		"Ciência",
		"Filosofia",
		"Metafísica",
		"Sociologia",
		"Teoria",
		"Ética",
		"Antropologia",
		"Lógica"
	];

	var ಠ_ಠ = [
		{
			chance: 25,
			values: [
				"Optativa em",
				"Eletiva em",
				"Seminários Especiais em",
				"Tópicos Especiais em"
			]
		}, {
			chance: 100,
			values: terms
		}, {
			chance: 95,
			prepend: 'da ',
			values: terms
		}, {
			chance: 15,
			prepend: 'da ',
			values: terms
		}, {
			chance: 20,
			values: [
				"Freudiana",
				"Marxista"
			]
		}, {
			chance: 66,
			values: [
				"Medieval",
				"Moderna",
				"Contemporânea",
				"Pós-Moderna",
				"Renascentista",
				"Pré-Histórica"
			]
		}, {
			chance: 66,
			values: [
				"Brasileira",
				"Americana",
				"Européia",
				"Britânica",
				"Russa",
				"Africana",
				"Ocidental",
				"Oriental"
			]
		}, {
			chance: 50,
			values: [
				"1", "2", "3", "4", "7", "9",
				"I", "II", "III", "V"
			]
		}
	];

	var choose = function(n) {
		if(+n !== n) {
			n = n.length;
		}
		return Math.floor(Math.random()*n);
	};

	var chance = function(c) {
		return Math.random()*100 < c;
	};

	if (!Array.prototype.map) {
		Array.prototype.map = function (fn) {
			var arr = [];
			for(var i = 0, l = this.length; i < l; i++){
				arr[i] = fn(this[i]);
			}
			return arr;
		};
	}

	var sentenceFromIndexes = function(indexes) {
		return indexes.map(function(idx, i) {
			if(idx === -1) return '';
			return (ಠ_ಠ[i].prepend || '') + ಠ_ಠ[i].values[idx];
		}).join(' ').replace(/\s{2,}|^\s|\s$/, ' ');
	};

	var generateIndexes = function() {
		return ಠ_ಠ.reduce(function(indexes, thing) {
			if(chance(thing.chance)) {
				var tentative;
				do {
					tentative = choose(thing.values);
				} while(sentenceFromIndexes(indexes).indexOf(thing.values[tentative]) !== -1);
				indexes.push(tentative);
			} else {
				indexes.push(-1);
			}
			return indexes;
		}, [])
	};

	document.getElementById('btn-generate').onclick = function(){
		var indexes = generateIndexes();
		var sentence = sentenceFromIndexes(indexes);
		document.getElementById('sentence').innerHTML = sentence;
		window.location.hash = indexes;
		_gaq.push(['_trackEvent', 'demo/direita-generator', 'generate']);
	};

	var recover = function(){
		var indexes = window.location.hash.substring(1).split(',').map(function(i){
			return parseInt(i, 10);
		});
		if(indexes.length === ಠ_ಠ.length) {
			var sentence = sentenceFromIndexes(indexes);
			document.getElementById('sentence').innerHTML = sentence;
		}
	};
	recover();
</script>